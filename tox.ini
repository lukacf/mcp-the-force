[tox]
envlist = py310,py311,py312
isolated_build = True

[testenv]
deps = 
    uv
allowlist_externals = uv
commands_pre =
    uv sync --frozen --extra test
commands =
    pytest tests/unit -v

[testenv:integration]
description = Run integration tests
commands =
    pytest tests/internal -v
    pytest tests/integration_mcp -v -p no:asyncio

[testenv:lint]
description = Run linters
commands_pre =
    uv sync --frozen --extra dev
commands =
    ruff check .
    mypy --install-types --non-interactive mcp_second_brain

[testenv:coverage]
description = Run tests with coverage
commands =
    pytest tests/unit -v --cov=mcp_second_brain --cov-report=term --cov-report=html